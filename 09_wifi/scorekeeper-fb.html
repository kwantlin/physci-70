<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>PHYSCI 70: Introduction to Digital Fabrication</title>
</head>

<body>
	<button id="player-1" name="player1">Player 1 </button>
	<button id="player-2" name="player2">Player 2 </button>
	<br><br>
	<button id="reset" name="reset">Reset </button>

	<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
     <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-analytics.js"></script>

<script>
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyDrU_TN3d7oFGv-1YaKKvqiA_ldggQm2AM",
    authDomain: "score-keeper-42200.firebaseapp.com",
    databaseURL: "https://score-keeper-42200-default-rtdb.firebaseio.com",
    projectId: "score-keeper-42200",
    storageBucket: "score-keeper-42200.appspot.com",
    messagingSenderId: "253875179294",
    appId: "1:253875179294:web:373b523f83db8abb4ec30f",
    measurementId: "G-WE7FRTZQRV"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

	// Get a database reference to our blog
	var ref = firebase.database().ref("/");

	// make the buttons call the function below 
	document.getElementById('player-1').addEventListener('click', player1, false);
	document.getElementById('player-2').addEventListener('click', player2, false);
	document.getElementById('reset').addEventListener('click', reset1, false);
	document.getElementById("reset").addEventListener("click", reset2, true);



	// var p2_ref = firebase.database().ref('P2_SCORE');

	// p2_ref.on('value', (snapshot) => {
	// // console.log("here2")
	// p2 = snapshot.val();
	// console.log(p2)
	// });


	function player1(){
		console.log("point to player 1");
		firebase
    .database()
    .ref('/')
    .child('P1_SCORE')
    .transaction(function(score) {
        return (score|| 0) + 1
    })
	}

	function player2(){
		console.log("point to player 2");
		firebase
    .database()
    .ref('/')
    .child('P2_SCORE')
    .transaction(function(score) {
        return (score || 0) + 1
    })
	}	

	function reset1(){
		firebase
		.database()
		.ref('/')
		.child('P1_SCORE')
		.transaction(function(score) {
			return 0;
		})
	}

	function reset2(){
		firebase
    .database()
    .ref('/')
    .child('P2_SCORE')
    .transaction(function(score) {
        return 0
    })
	}

    </script>

	

</body>